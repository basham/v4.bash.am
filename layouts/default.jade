doctype html
html(lang="en")
  head
    meta(charset="UTF-8")
    meta(
      http-equiv="X-UA-Compatible"
      content="IE=edge")
    meta(
      name="viewport"
      content="width=device-width, initial-scale=1.0")
    meta(
      name="description"
      content=site.description)
    meta(
      name="author"
      content=site.author)
    - var titles = hide_title ? [] : [title];
    if client
      - titles.push(client);
    - titles.push(site.author);
    - var pageTitle = titles.join(' &middot; ');
    title !{pageTitle}
    script
      include:js ../node_modules/fontfaceobserver/fontfaceobserver.js
      include:js ../node_modules/fg-loadcss/loadCSS.js
      include:js default.head.js
  body.Body#top
    header.Body-part.Header(role="banner")
      a.Header-name(href="/")= site.author
      nav.Header-nav.Nav(role="navigation")
        each page in collections.pages
          if page.order
            - var url = '/' + (page.path || '');
            - var isSelf = page.path === path;
            - var isInCollection = contains(collection, page.index);
            - var cn = { 'Nav-item--active': isSelf || isInCollection };
            a.Nav-item(href=url, class=cn)= page.title
    main.Body-part.Article(role="main")
      h1.Article-h1= title
      if description
        p.Article-paragraph.Article-meta= description
      if date
        p.Article-paragraph.Article-meta
          time.Article-time(datetime=date, pubdate)= dateFormat(date)
      if endDate
        p.Article-paragraph.Article-meta
          if client
            span.Article-client
              a.Link(href=clientLink)= client
          time.Article-time(datetime=startDate)= startDateLabel
          |  &ndash; 
          time.Article-time(datetime=endDate, pubdate)= endDateLabel
      != contents
    - var isArticle = contains(collection, 'articles');
    - var isWork = contains(collection, 'work');
    - var isCollection = isArticle || isWork;
    if isCollection
      - var collectionSingular = isArticle ? 'article' : 'work';
      - var collectionPlural = isArticle ? 'articles' : 'work';
      - var allLabel = ['All', collectionPlural].join(' ');
      - var allLink = isArticle ? '/articles' : '/work';
      - collectionSingular += ',';
      - collectionPlural += ',';
      nav.Body-part.Pager(role="navigation")
        .Pager-controls
          a.Button.Button--clear.Pager-top(href="#top") Back to top
          a.Button.Button--clear(href=allLink)= allLabel
        .Pager-paging
          if next
            - var pagerDate = next.endDateLabel || dateFormat(next.date);
            - var pagerTitle = ['Previous', collectionSingular, 'published', pagerDate].join(' ')
            a.Button.Button--clear.Pager-previous(
              href="/#{next.path}"
              title=pagerTitle)
              cite= next.title
          if previous
            - var pagerDate = previous.endDateLabel || dateFormat(previous.date);
            - var pagerTitle = ['Next', collectionSingular, 'published', pagerDate].join(' ')
            a.Button.Button--clear.Pager-next(
              href="/#{previous.path}"
              title=pagerTitle)
              cite= previous.title
    script
      include:js default.body.js
